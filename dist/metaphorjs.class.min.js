(function(){var s={lib:{},cmp:{},view:{}},q=function(d){return"function"===typeof d},n=function(d){return"string"==typeof d},l=function(d){return"undefined"==typeof d},t=function(d,k){var h={};d||(d=l(global)?window:global);this.register=function(g,m){var f;f=g;var b=f.split("."),a,c=b.pop();a=b.join(".");var e=b.length,r,p=d;if(h[a])f=[h[a],c,f];else{if(0<e)for(a=0;a<e;a++){r=b[a];if(k&&0==a)if(r==k){p=d;continue}else f=k+"."+f;l(p[r])&&(p[r]={});p=p[r]}else k&&(f=k+"."+f);f=[p,c,f]}b=f[0];c=f[1];
null!=b&&"object"===typeof b&&l(b[c])&&(b[c]=m,h[f[2]]=m);return m};this.exists=function(d){return!l(h[d])};this.get=function(g,m){if(!l(h[g]))return h[g];if(k&&!l(h[k+"."+g]))return h[k+"."+g];if(!m){var f=g.split("."),b,a=f.length,c,e=d;for(b=0;b<a;b++)if(c=f[b],k&&0==b&&c==k)e=d;else{if(l(e[c]))return;e=e[c]}e&&(h[g]=e);return e}};this.add=function(d,m){k&&0!==d.indexOf(k)&&(d=k+"."+d);l(h[d])&&(h[d]=m);return m};this.remove=function(d){delete h[d]}};t.prototype={register:null,exists:null,get:null,
add:null,remove:null};var v=Array.prototype.slice,u=function(d){d||(d=new t);var k=function(b,a){return m(function(){},b,a)},h=function(b,a,c){return function(){var e=void 0,d=this.supr;this.supr=b.prototype[a]||function(){};try{e=c.apply(this,arguments)}catch(f){}this.supr=d;return e}},g=function(b,a,c){for(var e in a)a.hasOwnProperty(e)&&(b[e]=q(a[e])&&c.prototype&&q(c.prototype[e])?h(c,e,a[e]):a[e])},m=function(b,a,c){var e=function(){};e.prototype=b.prototype;var e=new e,d=function(){c&&c.apply(this,
arguments);this.initialize&&this.initialize.apply(this,arguments)};g(e,a,b);d.prototype=e;d.prototype.constructor=d;d.prototype.getClass=function(){return this.__proto__.constructor.__class};d.prototype.getParentClass=function(){return this.__proto__.constructor.__parentClass};d.__instantiate=function(a){return function(){var b=function(){},c;b.prototype=a.prototype;b=new b;c=a.prototype.constructor.apply(b,arguments);return null!=c&&"object"===typeof c?c:b}}(d);return d},f=function(b,a,c,e,f,h){null===
b&&(b="");q(b)?(f=c,n(a)?(f=e,e=c):(e=a,c=b,a=null),b=null):n(b)||(f=a,e=b,b=c=a=null);n(a)||q(a)||(f=e,e=c,c=a,a=null);q(c)||(f=e,e=c,c=null);e=e||{};var g=a&&n(a)?d.get(a):a;if(a&&!g)throw Error(a+" not found");a=g?m(g,e,c):k(e,c);a.__isMetaphorClass=!0;a.__parent=g;a.__parentClass=g?g.__class:null;a.__class=b;if(f)for(var l in f)f.hasOwnProperty(l)&&(a[l]=f[l]);b&&(h?d.add(b,a):d.register(b,a));f&&f.alias&&d.add(f.alias,a);return a};this.factory=function(b){var a=d.get(b),c=v.call(arguments,1);
if(!a)throw Error(b+" not found");return a.__instantiate.apply(this,c)};this.isSubclassOf=function(b,a){var c=b,e=d.get;n(a)||(a=a.getClass?a.getClass():a.prototype.constructor.__class);for(n(b)&&(c=e(b));c;){if(c.prototype.constructor.__class==a)return!0;c&&(c=c.getParentClass?e(c.getParentClass()):c.__parent)}return!1};this.isInstanceOf=function(b,a){var c=n(a)?d.get(a):a;return c?b instanceof c:!1};this.define=f;this.defineCache=function(b,a,c,e,d){return f(b,a,c,e,d,!0)}};u.prototype={factory:null,
isSubclassOf:null,isInstanceOf:null,define:null,defineCache:null};s.lib.Namespace=t;s.lib.Class=u;"undefined"!=typeof global?global.MetaphorJs=s:window.MetaphorJs=s})();
