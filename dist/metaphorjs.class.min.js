(function(){window.MetaphorJs={lib:{}};var n=Array.prototype.slice;(function(){var h="undefined"!=typeof window?window:global,l={};MetaphorJs.ns={register:function(e,k){var g;g=e.split(".");var f,d=g.pop();f=g.join(".");var a=g.length,b,c=h;if(l[f])g=[l[f],d];else{for(f=0;f<a;f++)b=g[f],c[b]||(c[b]={}),c=c[b];g=[c,d]}g[0][g[1]]=k;return l[e]=k},exists:function(e){return l[e]?!0:!1},get:function(e,k){if(l[e]||k)return l[e];var g=e.split("."),f,d=g.length,a,b=h;for(f=0;f<d;f++){a=g[f];if(!b[a])return null;
b=b[a]}b&&(l[e]=b);return b},add:function(e,h){return l[e]=h},remove:function(e){delete l[e]}}})();(function(){var h=h||MetaphorJs.ns,l=function(d,a){return g(function(){},d,a)},e=function(d,a,b){return function(){var c=void 0,p=this.supr;this.supr=d.prototype[a]||function(){};try{c=b.apply(this,arguments)}catch(e){}this.supr=p;return c}},k=function(d,a,b){for(var c in a)a.hasOwnProperty(c)&&(d[c]="function"===typeof a[c]&&b.prototype&&"function"===typeof b.prototype[c]?e(b,c,a[c]):a[c])},g=function(d,
a,b){var c=function(){};c.prototype=d.prototype;c=new c;b=b||function(){this.initialize&&this.initialize.apply(this,arguments)};k(c,a,d);b.prototype=c;b.prototype.constructor=b;b.prototype.getClass=function(){return this.__proto__.constructor.__class};b.prototype.getParentClass=function(){return this.__proto__.constructor.__parentClass};b.__instantiate=function(a){return function(){var b=function(){},c;b.prototype=a.prototype;b=new b;c=a.prototype.constructor.apply(b,arguments);return"object"==typeof c?
c:b}}(b);return b},f=function(d,a,b,c,e,f){null===d&&(d="");"function"==typeof d?(e=b,"string"==typeof a?(e=c,c=b):(c=a,b=d,a=null),d=null):"string"!=typeof d&&(e=a,c=d,d=b=a=null);"string"!=typeof a&&"function"!=typeof a&&(e=c,c=b,b=a,a=null);"function"!=typeof b&&(e=c,c=b,b=null);c=c||{};var k=a&&"string"==typeof a?h.get(a):a;if(a&&!k)throw Error(a+" not found");a=k?g(k,c,b):l(c,b);a.__isMetaphorClass=!0;a.__parent=k;a.__parentClass=k?k.__class:null;a.__class=d;if(e)for(var m in e)e.hasOwnProperty(m)&&
(a[m]=e[m]);d&&(f?h.add(d,a):h.register(d,a));e&&e.alias&&h.add(e.alias,a);return a};MetaphorJs.define=f;MetaphorJs.defineCache=function(d,a,b,c,e){return f(d,a,b,c,e,!0)};MetaphorJs.factory=function(d){var a=h.get(d),b=n.call(arguments,1);if(!a)throw Error(d+" not found");return a.__instantiate.apply(this,b)};MetaphorJs.isInstanceOf=function(d,a){var b="string"==typeof a?h.get(a):a;return b?d instanceof b:!1};MetaphorJs.isSubclassOf=function(d,a){var b=d,c=h.get;"string"!=typeof a&&(a=a.getClass?
a.getClass():a.prototype.constructor.__class);for("string"==typeof d&&(b=c(d));b;){if(b.prototype.constructor.__class==a)return!0;b&&(b=b.getParentClass?c(b.getParentClass()):b.__parent)}return!1}})()})();
