'use strict';(function(){function t(m){return"string"==typeof m||m===""+m}function w(m){return"object"==typeof m&&3===y(m)&&!m.nodeType&&m.constructor===Object}function z(m){return!0===m||!1===m}function u(){}var v={lib:{},cmp:{},view:{}},A=Object.prototype.toString,y=function(){var m={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(c){if(!c){if(null===c)return 6;if(void 0===
c)return 7}var l=m[A.call(c)];return void 0===l?-1:1==l&&isNaN(c)?8:l}}(),s=function(m,c){var l={};m||(m="undefined"!=typeof global?global:window);this.register=function(g,n){var d;d=g;var f=d.split("."),a,e=f.pop();a=f.join(".");var k=f.length,b,h=m;if(l[a])d=[l[a],e,d];else{if(0<k)for(a=0;a<k;a++){b=f[a];if(c&&0==a)if(b==c){h=m;continue}else d=c+"."+d;void 0===h[b]&&(h[b]={});h=h[b]}else c&&(d=c+"."+d);d=[h,e,d]}f=d[0];e=d[1];null===f||"object"!=typeof f?k=!1:(k=y(f),k=2<k||-1==k);k&&void 0===f[e]&&
(f[e]=n,l[d[2]]=n);return n};this.exists=function(g){return void 0!==l[g]};this.get=function(g,n){if(void 0!==l[g])return l[g];if(c&&void 0!==l[c+"."+g])return l[c+"."+g];if(!n){var d=g.split("."),f,a=d.length,e,k=m;for(f=0;f<a;f++)if(e=d[f],c&&0==f&&e==c)k=m;else{if(void 0===k[e])return;k=k[e]}k&&(l[g]=k);return k}};this.add=function(g,m){c&&0!==g.indexOf(c)&&(g=c+"."+g);void 0===l[g]&&(l[g]=m);return m};this.remove=function(g){delete l[g]};this.normalize=function(g){return g&&c&&0!==g.indexOf(c)?
c+"."+g:g}};s.prototype.register=null;s.prototype.exists=null;s.prototype.get=null;s.prototype.add=null;s.prototype.remove=null;s.prototype.normalize=null;var x=Array.prototype.slice,B=function(){return function c(){var l=!1,g=!1,n=x.call(arguments),d=n.shift(),f,a,e;z(n[n.length-1])&&(l=n.pop());z(n[n.length-1])&&(g=l,l=n.pop());for(;n.length;)if(f=n.shift())for(a in f)if(f.hasOwnProperty(a)&&void 0!==(e=f[a]))if(g)if(d[a]&&w(d[a])&&w(e))c(d[a],e,l,g);else{if(!0===l||void 0==d[a])w(e)?(d[a]={},c(d[a],
e,l,!0)):d[a]=e}else if(!0===l||void 0==d[a])d[a]=e;return d}}(),C=function(){var m=function(){this.supr&&this.supr!==u&&this.supr.apply(this,arguments)},c=function(d,f,a){var e=d.prototype[f]||("$construct"==f?d:u)||u;return function(){var d,b=this.supr;this.supr=e;d=a.apply(this,arguments);this.supr=b;return d}},l=function(d,f,a){var e,g,b,h=a.prototype;for(e in f)f.hasOwnProperty(e)&&(b=h[e],g=f[e],d[e]="function"!=typeof g||b&&"function"!=typeof b?g:c(a,e,g));d.$plugins=null;h.$beforeInit?(d.$beforeInit=
h.$beforeInit.slice(),d.$afterInit=h.$afterInit.slice()):(d.$beforeInit=[],d.$afterInit=[])},g=function(d,f){for(var a in f)f.hasOwnProperty(a)&&("$beforeInit"==a?d.$beforeInit.push(f[a]):"$afterInit"==a?d.$afterInit.push(f[a]):d[a]||(d[a]=f[a]))},n=function(d){d||(d=new s);var f=function(){return function(){var b,h,a=[],f=[],g,c,e=[],l=x.call(arguments);if(!this)throw"Must instantiate via new";this.$construct.apply(this,arguments);g=this.$plugins;this.$plugins=null;b=-1;for(h=this.$beforeInit.length;++b<
h;a.push([this.$beforeInit[b],this]));b=-1;for(h=this.$afterInit.length;++b<h;f.push([this.$afterInit[b],this]));if(g)for(b=0,h=g.length;b<h;b++)c=g[b],t(c)&&(c=d.get(c,!0)),e[b]=c=new c(this,l),c.$beforeHostInit&&a.push([c.$beforeHostInit,c]),c.$afterHostInit&&f.push([c.$afterHostInit,c]);b=-1;for(h=a.length;++b<h;a[b][0].apply(a[b][1],arguments));this.$init&&this.$init.apply(this,arguments);b=-1;for(h=f.length;++b<h;f[b][0].apply(f[b][1],arguments));this.$plugins=e}},a=function(){};B(a.prototype,
{$class:null,$extends:null,$plugins:null,$mixins:null,$construct:u,$init:u,$beforeInit:[],$afterInit:[],$getClass:function(){return this.$class},$getParentClass:function(){return this.$extends},destroy:function(){for(var b in this)this.hasOwnProperty(b)&&(this[b]=null)}});a.$self=a;a.$instantiate=function(){var b=arguments;switch(b.length){case 0:return new this;case 1:return new this(b[0]);case 2:return new this(b[0],b[1]);case 3:return new this(b[0],b[1],b[2]);case 4:return new this(b[0],b[1],b[2],
b[3]);default:return c(this,b)}};a.$extend=function(b,d,a){return e(b,d,a,this)};var e=function(b,h,c,e){"function"!=typeof b&&(c=h,h=b,b=null);h=h||{};var n=h.$class,p=e||h.$extends,k=h.$mixins,q,r;e=p&&t(p)?d.get(p):a;p?t(p)?e=d.get(p):(e=p,p=e.$class||""):(e=a,p="");if(p&&!e)throw Error(p+" not found");n&&(n=d.normalize(n));h.$class=n;h.$extends=p;h.$mixins=null;r=function(){};r.prototype=e.prototype;p=new r;r=null;h.$construct=b||m;l(p,h,e);if(k)for(b=0,h=k.length;b<h;b++)r=k[b],t(r)&&(r=d.get(r,
!0)),g(p,r);k=f();p.constructor=k;k.prototype=p;for(q in a)"prototype"!=q&&a.hasOwnProperty(q)&&(k[q]=a[q]);for(q in e)"prototype"!=q&&e.hasOwnProperty(q)&&(k[q]=e[q]);if(c)for(q in c)"prototype"!=q&&c.hasOwnProperty(q)&&(k[q]=c[q]);k.$parent=e;k.$self=k;n&&d.register(n,k);return k},c=function(b){var a=d.get(b),c=x.call(arguments,1);if(!a)throw Error(b+" not found");return a.$instantiate.apply(a,c)};this.factory=c;this.isSubclassOf=function(b,a){var c=b,e=d.get;a=t(a)?d.normalize(a):a.prototype.$class;
for(t(b)&&(c=e(d.normalize(b)));c&&c.prototype;){if(c.prototype.$class==a)return!0;c=c.$parent}return!1};this.isInstanceOf=function(a,c){var e=t(c)?d.get(c):c;return e?a instanceof e:!1};this.define=e;this.BaseClass=a};n.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null};return n}();v.lib.Namespace=s;v.lib.Class=C;"undefined"!=typeof global?global.MetaphorJs=v:window.MetaphorJs=v})();
