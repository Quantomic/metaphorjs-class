'use strict';(function(){function s(h){return"string"==typeof h||h===""+h}function u(){}var t={lib:{},cmp:{},view:{}},v=Object.prototype.toString,w=function(){var h={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(d){if(!d){if(null===d)return 6;if(void 0===d)return 7}var g=h[v.call(d)];return void 0===g?-1:1==g&&isNaN(d)?8:g}}(),q=function(h,d){var g={};h||(h="undefined"!=
typeof global?global:window);this.register=function(f,p){var e;e=f;var b=e.split("."),k,c=b.pop();k=b.join(".");var a=b.length,l,r=h;if(g[k])e=[g[k],c,e];else{if(0<a)for(k=0;k<a;k++){l=b[k];if(d&&0==k)if(l==d){r=h;continue}else e=d+"."+e;void 0===r[l]&&(r[l]={});r=r[l]}else d&&(e=d+"."+e);e=[r,c,e]}b=e[0];c=e[1];null===b||"object"!=typeof b?a=!1:(a=w(b),a=2<a||-1==a);a&&void 0===b[c]&&(b[c]=p,g[e[2]]=p);return p};this.exists=function(f){return void 0!==g[f]};this.get=function(f,p){if(void 0!==g[f])return g[f];
if(d&&void 0!==g[d+"."+f])return g[d+"."+f];if(!p){var e=f.split("."),b,k=e.length,c,a=h;for(b=0;b<k;b++)if(c=e[b],d&&0==b&&c==d)a=h;else{if(void 0===a[c])return;a=a[c]}a&&(g[f]=a);return a}};this.add=function(f,h){d&&0!==f.indexOf(d)&&(f=d+"."+f);void 0===g[f]&&(g[f]=h);return h};this.remove=function(f){delete g[f]};this.normalize=function(f){return f&&d&&0!==f.indexOf(d)?d+"."+f:f}};q.prototype.register=null;q.prototype.exists=null;q.prototype.get=null;q.prototype.add=null;q.prototype.remove=null;
q.prototype.normalize=null;var x=Array.prototype.slice,y=function(){var h=function(){this.supr&&this.supr!==u&&this.supr.apply(this,arguments)},d=function(e,b,f){var d=e.prototype[b]||("$construct"==b?e:u)||u;return function(){var a,b=this.supr;this.supr=d;a=f.apply(this,arguments);this.supr=b;return a}},g=function(e,b,f){for(var c in b)b.hasOwnProperty(c)&&(e[c]="function"!=typeof b[c]||"function"!=typeof f.prototype[c]&&f.prototype[c]?b[c]:d(f,c,b[c]))},f=function(){return function(){if(!this)throw"Must instantiate via new";
this.$construct.apply(this,arguments);this.initialize&&this.initialize.apply(this,arguments)}},p=function(e){e||(e=new q);var b=function(){};b.prototype={$class:null,$extends:null,$construct:function(){},$getClass:function(){return this.$class},$getParentClass:function(){return this.$extends},$override:function(){},destroy:function(){for(var a in this)this.hasOwnProperty(a)&&(this[a]=null)}};b.$self=b;b.$instantiate=function(){var a=arguments;switch(a.length){case 0:return new this;case 1:return new this(a[0]);
case 2:return new this(a[0],a[1]);case 3:return new this(a[0],a[1],a[2]);case 4:return new this(a[0],a[1],a[2],a[3]);default:return c(this,a)}};b.$extend=function(a,b,e){return d(a,b,e,this)};var d=function(a,l,d,c){"function"!=typeof a&&(d=l,l=a,a=null);l=l||{};var k=l.$class,m=c||l.$extends,n,p;c=m&&s(m)?e.get(m):b;m?s(m)?c=e.get(m):(c=m,m=c.$class||""):(c=b,m="");if(m&&!c)throw Error(m+" not found");k&&(k=e.normalize(k));l.$class=k;l.$extends=m;p=function(){};p.prototype=c.prototype;m=new p;p=
null;l.$construct=a||h;g(m,l,c);a=f();m.constructor=a;a.prototype=m;for(n in b)"prototype"!=n&&b.hasOwnProperty(n)&&(a[n]=b[n]);for(n in c)"prototype"!=n&&c.hasOwnProperty(n)&&(a[n]=c[n]);if(d)for(n in d)"prototype"!=n&&d.hasOwnProperty(n)&&(a[n]=d[n]);a.$parent=c;a.$self=a;k&&e.register(k,a);return a},c=function(a){var b=e.get(a),c=x.call(arguments,1);if(!b)throw Error(a+" not found");return b.$instantiate.apply(b,c)};this.factory=c;this.isSubclassOf=function(a,b){var c=a,d=e.get;b=s(b)?e.normalize(b):
b.prototype.$class;for(s(a)&&(c=d(e.normalize(a)));c&&c.prototype;){if(c.prototype.$class==b)return!0;c=c.$parent}return!1};this.isInstanceOf=function(a,b){var c=s(b)?e.get(b):b;return c?a instanceof c:!1};this.define=d;this.BaseClass=b};p.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null};return p}();t.lib.Namespace=q;t.lib.Class=y;"undefined"!=typeof global?global.MetaphorJs=t:window.MetaphorJs=t})();
