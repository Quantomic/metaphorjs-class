(function(){var r={lib:{},cmp:{},view:{}},q=function(b){return"function"==typeof b},w=Object.prototype.toString,x=function(){var b={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(g){if(!g){if(null===g)return 6;if(void 0===g)return 7}var l=b[w.call(g)];return void 0===l?-1:1==l&&isNaN(g)?8:l}}(),p=function(b){return"string"==typeof b||b===""+b},u=function(b){if(null===
b||"object"!=typeof b)return!1;b=x(b);return 2<b||-1==b},s=function(b,g){var l={};b||(b="undefined"!=typeof global?global:window);this.register=function(m,n){var k;k=m;var h=k.split("."),f,a=h.pop();f=h.join(".");var c=h.length,d,e=b;if(l[f])k=[l[f],a,k];else{if(0<c)for(f=0;f<c;f++){d=h[f];if(g&&0==f)if(d==g){e=b;continue}else k=g+"."+k;void 0===e[d]&&(e[d]={});e=e[d]}else g&&(k=g+"."+k);k=[e,a,k]}h=k[0];a=k[1];u(h)&&void 0===h[a]&&(h[a]=n,l[k[2]]=n);return n};this.exists=function(b){return void 0!==
l[b]};this.get=function(m,n){if(void 0!==l[m])return l[m];if(g&&void 0!==l[g+"."+m])return l[g+"."+m];if(!n){var k=m.split("."),h,f=k.length,a,c=b;for(h=0;h<f;h++)if(a=k[h],g&&0==h&&a==g)c=b;else{if(void 0===c[a])return;c=c[a]}c&&(l[m]=c);return c}};this.add=function(b,n){g&&0!==b.indexOf(g)&&(b=g+"."+b);void 0===l[b]&&(l[b]=n);return n};this.remove=function(b){delete l[b]};this.normalize=function(b){return b&&g&&0!==b.indexOf(g)?g+"."+b:b}};s.prototype={register:null,exists:null,get:null,add:null,
remove:null,normalize:null};var y=Array.prototype.slice,t=function(){},v=function(b){b||(b=new s);var g=function(){this.supr&&this.supr!==t&&this.supr.apply(this,arguments)},l=function(b,a){return k(function(){},b,a)},m=function(b,a,c){return function(){var d,e=this.supr;this.supr=b.prototype[a]||("__construct"==a?b:t)||t;d=c.apply(this,arguments);this.supr=e;return d}},n=function(b,a,c){for(var d in a)a.hasOwnProperty(d)&&(b[d]=!q(a[d])||!q(c.prototype[d])&&c.prototype[d]?a[d]:m(c,d,a[d]))},k=function(b,
a,c){var d=function(){};d.prototype=b.prototype;d=new d;a.__construct=c||g;var e=function(){if(!(this instanceof e))return e.instantiate.apply(null,arguments);this.__construct.apply(this,arguments);this.initialize&&this.initialize.apply(this,arguments)};n(d,a,b);d.constructor=e;e.prototype=d;e.prototype.getClass=function(){return e.className};e.prototype.getParentClass=function(){return e.parentClass};e.instantiate=function(){var a=function(){},b;a.prototype=e.prototype;a=new a;b=e.prototype.constructor.apply(a,
arguments);return u(b)?b:a};e.extend=function(a,b,c,d){return h(a,e,b,c,d)};return e},h=function(f,a,c,d,e,g){null===f&&(f="");q(f)?(e=c,p(a)?(e=d,d=c):(d=a,c=f,a=null),f=null):p(f)||(e=a,d=f,f=c=a=null);p(a)||q(a)||(e=d,d=c,c=a,a=null);q(c)||(e=d,d=c,c=null);d=d||{};var h=a&&p(a)?b.get(a):a;if(a&&!h)throw Error(a+" not found");a=h?k(h,d,c):l(d,c);a.isMetaphorClass=!0;a.parent=h;a.parentClass=h?h.className:null;a.className=b.normalize(f);if(e)for(var m in e)e.hasOwnProperty(m)&&(a[m]=e[m]);f&&(g?
b.add(f,a):b.register(f,a));e&&e.alias&&b.add(e.alias,a);return a};this.factory=function(f){var a=b.get(f),c=y.call(arguments,1);if(!a)throw Error(f+" not found");return a.instantiate.apply(this,c)};this.isSubclassOf=function(f,a){var c=f,d=b.get;a=p(a)?b.normalize(a):a.getClass?a.getClass():a.className;for(p(f)&&(c=d(b.normalize(f)));c;){if(c.className==a)return!0;c=c.getParentClass?d(c.getParentClass()):c.parent}return!1};this.isInstanceOf=function(f,a){var c=p(a)?b.get(a):a;return c?f instanceof
c:!1};this.define=h;this.defineCache=function(b,a,c,d,e){return h(b,a,c,d,e,!0)};this.extend=function(b,a,c,d){return h(null,b,a,c,d)}};v.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null,defineCache:null,extend:null};r.lib.Namespace=s;r.lib.Class=v;"undefined"!=typeof global?global.MetaphorJs=r:window.MetaphorJs=r})();
