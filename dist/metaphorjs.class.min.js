(function(){var r={lib:{},cmp:{},view:{}},q=function(b){return"function"==typeof b},w=Object.prototype.toString,x=function(){var b={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(f){if(!f){if(null===f)return 6;if(void 0===f)return 7}var k=b[w.call(f)];return void 0===k?-1:1==k&&isNaN(f)?8:k}}(),n=function(b){return"string"==typeof b||b===""+b},u=function(b){if(null===
b||"object"!=typeof b)return!1;b=x(b);return 2<b||-1==b},s=function(b,f){var k={};b||(b="undefined"!=typeof global?global:window);this.register=function(l,m){var h;h=l;var g=h.split("."),e,a=g.pop();e=g.join(".");var c=g.length,d,p=b;if(k[e])h=[k[e],a,h];else{if(0<c)for(e=0;e<c;e++){d=g[e];if(f&&0==e)if(d==f){p=b;continue}else h=f+"."+h;void 0===p[d]&&(p[d]={});p=p[d]}else f&&(h=f+"."+h);h=[p,a,h]}g=h[0];a=h[1];u(g)&&void 0===g[a]&&(g[a]=m,k[h[2]]=m);return m};this.exists=function(b){return void 0!==
k[b]};this.get=function(l,m){if(void 0!==k[l])return k[l];if(f&&void 0!==k[f+"."+l])return k[f+"."+l];if(!m){var h=l.split("."),g,e=h.length,a,c=b;for(g=0;g<e;g++)if(a=h[g],f&&0==g&&a==f)c=b;else{if(void 0===c[a])return;c=c[a]}c&&(k[l]=c);return c}};this.add=function(b,m){f&&0!==b.indexOf(f)&&(b=f+"."+b);void 0===k[b]&&(k[b]=m);return m};this.remove=function(b){delete k[b]}};s.prototype={register:null,exists:null,get:null,add:null,remove:null};var y=Array.prototype.slice,t=function(){},v=function(b){b||
(b=new s);var f=function(){this.supr&&this.supr!==t&&this.supr.apply(this,arguments)},k=function(e,a){return h(function(){},e,a)},l=function(e,a,c){return function(){var d,b=this.supr;this.supr=e.prototype[a]||("__construct"==a?e:t)||t;d=c.apply(this,arguments);this.supr=b;return d}},m=function(e,a,c){for(var d in a)a.hasOwnProperty(d)&&(e[d]=!q(a[d])||!q(c.prototype[d])&&c.prototype[d]?a[d]:l(c,d,a[d]))},h=function(e,a,c){var d=function(){};d.prototype=e.prototype;d=new d;a.__construct=c||f;var b=
function(){this.__construct.apply(this,arguments);this.initialize&&this.initialize.apply(this,arguments)};m(d,a,e);d.constructor=b;b.prototype=d;b.prototype.getClass=function(){return b.__class};b.prototype.getParentClass=function(){return b.__parentClass};b.__instantiate=function(a){return function(){var b=function(){},c;b.prototype=a.prototype;b=new b;c=a.prototype.constructor.apply(b,arguments);return u(c)?c:b}}(b);return b},g=function(e,a,c,d,f,g){null===e&&(e="");q(e)?(f=c,n(a)?(f=d,d=c):(d=
a,c=e,a=null),e=null):n(e)||(f=a,d=e,e=c=a=null);n(a)||q(a)||(f=d,d=c,c=a,a=null);q(c)||(f=d,d=c,c=null);d=d||{};var l=a&&n(a)?b.get(a):a;if(a&&!l)throw Error(a+" not found");a=l?h(l,d,c):k(d,c);a.__isMetaphorClass=!0;a.__parent=l;a.__parentClass=l?l.__class:null;a.__class=e;if(f)for(var m in f)f.hasOwnProperty(m)&&(a[m]=f[m]);e&&(g?b.add(e,a):b.register(e,a));f&&f.alias&&b.add(f.alias,a);return a};this.factory=function(e){var a=b.get(e),c=y.call(arguments,1);if(!a)throw Error(e+" not found");return a.__instantiate.apply(this,
c)};this.isSubclassOf=function(e,a){var c=e,d=b.get;n(a)||(a=a.getClass?a.getClass():a.prototype.constructor.__class);for(n(e)&&(c=d(e));c;){if(c.prototype.constructor.__class==a)return!0;c&&(c=c.getParentClass?d(c.getParentClass()):c.__parent)}return!1};this.isInstanceOf=function(e,a){var c=n(a)?b.get(a):a;return c?e instanceof c:!1};this.define=g;this.defineCache=function(b,a,c,d,f){return g(b,a,c,d,f,!0)};this.extend=function(b,a,c,d){return g(null,b,a,c,d)}};v.prototype={factory:null,isSubclassOf:null,
isInstanceOf:null,define:null,defineCache:null,extend:null};r.lib.Namespace=s;r.lib.Class=v;"undefined"!=typeof global?global.MetaphorJs=r:window.MetaphorJs=r})();
