'use strict';define("metaphorjs-class",["metaphorjs-namespace"],function(w){function s(g){return"string"==typeof g||g===""+g}function t(g){return"object"==typeof g&&3===u(g)&&!g.nodeType&&g.constructor===Object}function x(g){return!0===g||!1===g}function r(){}function z(g){if(null===g||"object"!=typeof g)return!1;g=u(g);return 2<g||-1==g}var A=Object.prototype.toString,u=function(){var g={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,
"[object RegExp]":9,"[object Date]":10};return function(h){if(!h){if(null===h)return 6;if(void 0===h)return 7}var b=g[A.call(h)];return void 0===b?-1:1==b&&isNaN(h)?8:b}}(),y=Array.prototype.slice,B=function(){return function h(){var b=!1,n=!1,l=y.call(arguments),k=l.shift(),c,f,a;x(l[l.length-1])&&(b=l.pop());x(l[l.length-1])&&(n=b,b=l.pop());for(;l.length;)if(c=l.shift())for(f in c)if(c.hasOwnProperty(f)&&void 0!==(a=c[f]))if(n)if(k[f]&&t(k[f])&&t(a))h(k[f],a,b,n);else{if(!0===b||void 0==k[f])t(a)?
(k[f]={},h(k[f],a,b,!0)):k[f]=a}else if(!0===b||void 0==k[f])k[f]=a;return k}}(),C=function(g,h){var b=function(){},n;b.prototype=g.prototype;b=new b;n=g.apply(b,h);return z(n)||!1===n?n:b},D=function(g,h,b,n,l,k){l=l||"before";return function(){var c,f;if("instead"==l)return h.apply(b||n,arguments);"before"==l?(c=h.apply(b||n,arguments),f=!1!==c?g.apply(n||b,arguments):null):(f=g.apply(n||b,arguments),c=h.apply(b||n,arguments));return k?c:f}};return function(){var g=function(){this.$super&&this.$super!==
r&&this.$super.apply(this,arguments)},h=function(c,f,a){var $super=c.prototype[f]||("$constructor"==f?c:r)||r;return function(){var c,d=this.$super;this.$super=$super;c=a.apply(this,arguments);this.$super=d;return c}},b=function(c,f,a,g){var b,d,v,m=a.prototype;for(b in f)f.hasOwnProperty(b)&&(v=m[b],d=f[b],c[b]="function"!=typeof d||v&&"function"!=typeof v?d:h(a,b,d));g||(c.$plugins=null,m.$beforeInit?(c.$beforeInit=m.$beforeInit.slice(),c.$afterInit=m.$afterInit.slice(),c.$beforeDestroy=m.$beforeDestroy.slice(),
c.$afterDestroy=m.$afterDestroy.slice()):(c.$beforeInit=[],c.$afterInit=[],c.$beforeDestroy=[],c.$afterDestroy=[]))},n=function(c,b){for(var a in b)b.hasOwnProperty(a)&&("$beforeInit"==a?c.$beforeInit.push(b[a]):"$afterInit"==a?c.$afterInit.push(b[a]):"$beforeDestroy"==a?c.$beforeDestroy.push(b[a]):"$afterDestroy"==a?c.$afterDestroy.push(b[a]):c[a]||(c[a]=b[a]))},l=function(c){c||(c=new w);var f=function(){return function(){var d=[],b=[],m=arguments,e,a,g,f,l;if(!this)throw"Must instantiate via new";
this.$plugins=[];(e=this.$constructor.apply(this,arguments))&&"object"==typeof e&&5===u(e)&&(m=e);g=this.$plugins;e=-1;for(a=this.$beforeInit.length;++e<a;d.push([this.$beforeInit[e],this]));e=-1;for(a=this.$afterInit.length;++e<a;b.push([this.$afterInit[e],this]));if(g&&g.length)for(e=0,a=g.length;e<a;e++){f=g[e];if(s(f)&&(l=f,f=c.get("plugin."+f,!0),!f))throw l+" not found";f=new f(this,m);f.$beforeHostInit&&d.push([f.$beforeHostInit,f]);f.$afterHostInit&&b.push([f.$afterHostInit,f]);g[e]=f}e=-1;
for(a=d.length;++e<a;d[e][0].apply(d[e][1],m));this.$init&&this.$init.apply(this,m);e=-1;for(a=b.length;++e<a;b[e][0].apply(b[e][1],m));}},a=function(){};B(a.prototype,{$class:null,$extends:null,$plugins:null,$mixins:null,$destroyed:!1,$constructor:r,$init:r,$beforeInit:[],$afterInit:[],$beforeDestroy:[],$afterDestroy:[],$getClass:function(){return this.$class},$getParentClass:function(){return this.$extends},$intercept:function(d,a,m,e,b){this[d]=D(this[d],a,m||this,this,e,b)},$implement:function(d){var a=
this.constructor;a&&a.$parent&&b(this,d,a.$parent)},$destroy:function(){var d=this.$beforeDestroy,a=this.$afterDestroy,b=this.$plugins,e,c,f;if(!this.$destroyed){this.$destroyed=!0;e=-1;for(c=d.length;++e<c;d[e].apply(this,arguments));e=0;for(c=b.length;e<c;e++)b[e].$beforeHostDestroy&&b[e].$beforeHostDestroy.call(b[e],arguments);f=this.destroy.apply(this,arguments);e=-1;for(c=d.length;++e<c;a[e].apply(this,arguments));e=0;for(c=b.length;e<c;e++)b[e].$destroy.apply(b[e],arguments);if(!1!==f)for(e in this)this.hasOwnProperty(e)&&
(this[e]=null);this.$destroyed=!0}},destroy:function(){}});a.$self=a;a.$instantiate=function(){var d=arguments;switch(d.length){case 0:return new this;case 1:return new this(d[0]);case 2:return new this(d[0],d[1]);case 3:return new this(d[0],d[1],d[2]);case 4:return new this(d[0],d[1],d[2],d[3]);default:return C(this,d)}};a.$override=function(d){var a=this.$self,c=this.$parent;a&&c&&b(a.prototype,d,c)};a.$extend=function(d,a){return h(d,a,this)};a.$destroy=function(){for(var d in this)this[d]=null};
var h=function(d,l,m){d=d||{};var e=d.$class,h=m||d.$extends,k=d.$mixins,q,p,r;h?s(h)?m=c.get(h):(m=h,h=m.$class||""):(m=a,h="");if(h&&!m)throw h+" not found";e&&(e=c.normalize(e));d.$class=e;d.$extends=h;d.$mixins=null;q=function(){};q.prototype=m.prototype;h=new q;q=null;d.$constructor=d.$constructor||g;b(h,d,m);if(k)for(d=0,q=k.length;d<q;d++)r=k[d],s(r)&&(r=c.get("mixin."+r,!0)),n(h,r);k=f();h.constructor=k;k.prototype=h;for(p in a)"prototype"!=p&&a.hasOwnProperty(p)&&(k[p]=a[p]);for(p in m)"prototype"!=
p&&m.hasOwnProperty(p)&&(k[p]=m[p]);if(l)for(p in l)"prototype"!=p&&l.hasOwnProperty(p)&&(k[p]=l[p]);k.$parent=m;k.$self=k;e&&c.register(e,k);return k},q=this;q.factory=function(d){var a=c.get(d),b=y.call(arguments,1);if(!a)throw d+" not found";return a.$instantiate.apply(a,b)};q.isSubclassOf=function(a,b){var f=a,e=c.get;b=s(b)?c.normalize(b):b.prototype.$class;for(s(a)&&(f=e(c.normalize(a)));f&&f.prototype;){if(f.prototype.$class==b)return!0;f=f.$parent}return!1};q.isInstanceOf=function(a,b){var f=
s(b)?c.get(b):b;return f?a instanceof f:!1};q.define=h;q.destroy=function(){q===k&&(k=null);a.$destroy();a=null;c.destroy();l=c=null};q.BaseClass=a};l.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null,destroy:null};var k;l.global=function(){k||(k=new l(w.global()));return k};return l}()});
