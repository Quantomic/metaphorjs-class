define("metaphorjs-class",["metaphorjs-namespace"],function(q){var k=function(f){return"function"===typeof f},g=function(f){return"string"==typeof f},m=function(f){f||(f=new q);var m=function(d,a){return p(function(){},d,a)},r=function(d,a,b){return function(){var c=void 0,e=this.supr;this.supr=d.prototype[a]||function(){};try{c=b.apply(this,arguments)}catch(f){}this.supr=e;return c}},s=function(d,a,b){for(var c in a)a.hasOwnProperty(c)&&(d[c]=k(a[c])&&b.prototype&&k(b.prototype[c])?r(b,c,a[c]):a[c])},
p=function(d,a,b){var c=function(){};c.prototype=d.prototype;var c=new c,e=function(){b&&b.apply(this,arguments);this.initialize&&this.initialize.apply(this,arguments)};s(c,a,d);e.prototype=c;e.prototype.constructor=e;e.prototype.getClass=function(){return this.__proto__.constructor.__class};e.prototype.getParentClass=function(){return this.__proto__.constructor.__parentClass};e.__instantiate=function(a){return function(){var b=function(){},c;b.prototype=a.prototype;b=new b;c=a.prototype.constructor.apply(b,
arguments);return null!=c&&"object"===typeof c?c:b}}(e);return e},l=function(d,a,b,c,e,l){null===d&&(d="");k(d)?(e=b,g(a)?(e=c,c=b):(c=a,b=d,a=null),d=null):g(d)||(e=a,c=d,d=b=a=null);g(a)||k(a)||(e=c,c=b,b=a,a=null);k(b)||(e=c,c=b,b=null);c=c||{};var h=a&&g(a)?f.get(a):a;if(a&&!h)throw Error(a+" not found");a=h?p(h,c,b):m(c,b);a.__isMetaphorClass=!0;a.__parent=h;a.__parentClass=h?h.__class:null;a.__class=f;if(e)for(var n in e)e.hasOwnProperty(n)&&(a[n]=e[n]);d&&(l?f.add(d,a):f.register(d,a));e&&
e.alias&&f.add(e.alias,a);return a};this.factory=function(d){var a=f.get(d),b=slice.call(arguments,1);if(!a)throw Error(d+" not found");return a.__instantiate.apply(this,b)};this.isSubclassOf=function(d,a){var b=d,c=f.get;g(a)||(a=a.getClass?a.getClass():a.prototype.constructor.__class);for(g(d)&&(b=c(d));b;){if(b.prototype.constructor.__class==a)return!0;b&&(b=b.getParentClass?c(b.getParentClass()):b.__parent)}return!1};this.isInstanceOf=function(d,a){var b=g(a)?f.get(a):a;return b?d instanceof b:
!1};this.define=l;this.defineCache=function(d,a,b,c,e){return l(d,a,b,c,e,!0)}};m.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null,defineCache:null};return m});
