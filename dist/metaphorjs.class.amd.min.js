define("metaphorjs-class",["metaphorjs-namespace"],function(r){var h=function(f){return"function"==typeof f},k=Object.prototype.toString,n=function(){var f={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(g){if(!g){if(null===g)return 6;if(void 0===g)return 7}var h=f[k.call(g)];return void 0===h?-1:1==h&&isNaN(g)?8:h}}(),g=function(f){return"string"==typeof f||0===n(f)},
s=function(f){if(null===f||"object"!=typeof f)return!1;f=n(f);return 2<f||-1==f},t=Array.prototype.slice,m=function(f){f||(f=new r);var n=function(d,a){return q(function(){},d,a)},m=function(d,a,b){return function(){var c,e=this.supr;this.supr="__construct"==a?d.prototype[a]||d.prototype.constructor:d.prototype[a]||function(){};c=b.apply(this,arguments);this.supr=e;return c}},k=function(d,a,b){for(var c in a)a.hasOwnProperty(c)&&(d[c]=!h(a[c])||!h(b.prototype[c])&&b.prototype[c]?a[c]:m(b,c,a[c]))},
q=function(d,a,b){var c=function(){};c.prototype=d.prototype;c=new c;b&&(a.__construct=b);var e=function(){this.__construct&&this.__construct.apply(this,arguments);this.initialize&&this.initialize.apply(this,arguments)};k(c,a,d);c.constructor=e;e.prototype=c;e.prototype.getClass=function(){return e.__class};e.prototype.getParentClass=function(){return e.__parentClass};e.__instantiate=function(a){return function(){var b=function(){},c;b.prototype=a.prototype;b=new b;c=a.prototype.constructor.apply(b,
arguments);return s(c)?c:b}}(e);return e},p=function(d,a,b,c,e,m){null===d&&(d="");h(d)?(e=b,g(a)?(e=c,c=b):(c=a,b=d,a=null),d=null):g(d)||(e=a,c=d,d=b=a=null);g(a)||h(a)||(e=c,c=b,b=a,a=null);h(b)||(e=c,c=b,b=null);c=c||{};var l=a&&g(a)?f.get(a):a;if(a&&!l)throw Error(a+" not found");a=l?q(l,c,b):n(c,b);a.__isMetaphorClass=!0;a.__parent=l;a.__parentClass=l?l.__class:null;a.__class=d;if(e)for(var k in e)e.hasOwnProperty(k)&&(a[k]=e[k]);d&&(m?f.add(d,a):f.register(d,a));e&&e.alias&&f.add(e.alias,a);
return a};this.factory=function(d){var a=f.get(d),b=t.call(arguments,1);if(!a)throw Error(d+" not found");return a.__instantiate.apply(this,b)};this.isSubclassOf=function(d,a){var b=d,c=f.get;g(a)||(a=a.getClass?a.getClass():a.prototype.constructor.__class);for(g(d)&&(b=c(d));b;){if(b.prototype.constructor.__class==a)return!0;b&&(b=b.getParentClass?c(b.getParentClass()):b.__parent)}return!1};this.isInstanceOf=function(d,a){var b=g(a)?f.get(a):a;return b?d instanceof b:!1};this.define=p;this.defineCache=
function(d,a,b,c,e){return p(d,a,b,c,e,!0)};this.extend=function(d,a,b,c){return p(null,d,a,b,c)}};m.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null,defineCache:null,extend:null};return m});
