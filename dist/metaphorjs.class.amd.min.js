define("metaphorjs-class",["metaphorjs-namespace"],function(s){var h=function(f){return"function"==typeof f},n=Object.prototype.toString,p=function(){var f={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(g){if(!g){if(null===g)return 6;if(void 0===g)return 7}var h=f[n.call(g)];return void 0===h?-1:1==h&&isNaN(g)?8:h}}(),g=function(f){return"string"==typeof f||f===""+f},
t=function(f){if(null===f||"object"!=typeof f)return!1;f=p(f);return 2<f||-1==f},u=Array.prototype.slice,q=function(){},k=function(f){f||(f=new s);var k=function(){this.supr&&this.supr!==q&&this.supr.apply(this,arguments)},n=function(d,a){return r(function(){},d,a)},p=function(d,a,c){return function(){var b,e=this.supr;this.supr=d.prototype[a]||("__construct"==a?d:q)||q;b=c.apply(this,arguments);this.supr=e;return b}},v=function(d,a,c){for(var b in a)a.hasOwnProperty(b)&&(d[b]=!h(a[b])||!h(c.prototype[b])&&
c.prototype[b]?a[b]:p(c,b,a[b]))},r=function(d,a,c){var b=function(){};b.prototype=d.prototype;b=new b;a.__construct=c||k;var e=function(){if(!(this instanceof e))return e.instantiate.apply(null,arguments);this.__construct.apply(this,arguments);this.initialize&&this.initialize.apply(this,arguments)};v(b,a,d);b.constructor=e;e.prototype=b;e.prototype.getClass=function(){return e.className};e.prototype.getParentClass=function(){return e.parentClass};e.instantiate=function(){var a=function(){},b;a.prototype=
e.prototype;a=new a;b=e.prototype.constructor.apply(a,arguments);return t(b)?b:a};e.extend=function(a,b,c,d){return m(a,e,b,c,d)};return e},m=function(d,a,c,b,e,m){null===d&&(d="");h(d)?(e=c,g(a)?(e=b,b=c):(b=a,c=d,a=null),d=null):g(d)||(e=a,b=d,d=c=a=null);g(a)||h(a)||(e=b,b=c,c=a,a=null);h(c)||(e=b,b=c,c=null);b=b||{};var l=a&&g(a)?f.get(a):a;if(a&&!l)throw Error(a+" not found");a=l?r(l,b,c):n(b,c);a.isMetaphorClass=!0;a.parent=l;a.parentClass=l?l.className:null;a.className=f.normalize(d);if(e)for(var k in e)e.hasOwnProperty(k)&&
(a[k]=e[k]);d&&(m?f.add(d,a):f.register(d,a));e&&e.alias&&f.add(e.alias,a);return a};this.factory=function(d){var a=f.get(d),c=u.call(arguments,1);if(!a)throw Error(d+" not found");return a.instantiate.apply(this,c)};this.isSubclassOf=function(d,a){var c=d,b=f.get;a=g(a)?f.normalize(a):a.getClass?a.getClass():a.className;for(g(d)&&(c=b(f.normalize(d)));c;){if(c.className==a)return!0;c=c.getParentClass?b(c.getParentClass()):c.parent}return!1};this.isInstanceOf=function(d,a){var c=g(a)?f.get(a):a;return c?
d instanceof c:!1};this.define=m;this.defineCache=function(d,a,c,b,e){return m(d,a,c,b,e,!0)};this.extend=function(d,a,c,b){return m(null,d,a,c,b)}};k.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null,defineCache:null,extend:null};return k});
