'use strict';define("metaphorjs-class",["metaphorjs-namespace"],function(y){function t(k){return"string"==typeof k||k===""+k}function v(k){return"object"==typeof k&&3===z(k)&&!k.nodeType&&k.constructor===Object}function w(k){return!0===k||!1===k}function u(){}var A=Object.prototype.toString,z=function(){var k={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(l){if(!l){if(null===
l)return 6;if(void 0===l)return 7}var m=k[A.call(l)];return void 0===m?-1:1==m&&isNaN(l)?8:m}}(),x=Array.prototype.slice,B=function(){return function l(){var m=!1,q=!1,h=x.call(arguments),a=h.shift(),d,b,p;w(h[h.length-1])&&(m=h.pop());w(h[h.length-1])&&(q=m,m=h.pop());for(;h.length;)if(d=h.shift())for(b in d)if(d.hasOwnProperty(b)&&void 0!==(p=d[b]))if(q)if(a[b]&&v(a[b])&&v(p))l(a[b],p,m,q);else{if(!0===m||void 0==a[b])v(p)?(a[b]={},l(a[b],p,m,!0)):a[b]=p}else if(!0===m||void 0==a[b])a[b]=p;return a}}(),
C=function(k,l,m,q,h,a){h=h||"before";return function(){var d,b;if("instead"==h)return l.apply(m||q,arguments);"before"==h?(d=l.apply(m||q,arguments),b=!1!==d?k.apply(q||m,arguments):null):(b=k.apply(q||m,arguments),d=l.apply(m||q,arguments));return a?d:b}};return function(){var k=function(){this.$super&&this.$super!==u&&this.$super.apply(this,arguments)},l=function(a,d,b){var $super=a.prototype[d]||("$constructor"==d?a:u)||u;return function(){var a,e=this.$super;this.$super=$super;a=b.apply(this,
arguments);this.$super=e;return a}},m=function(a,d,b,m){var k,e,s,c=b.prototype;for(k in d)d.hasOwnProperty(k)&&(s=c[k],e=d[k],a[k]="function"!=typeof e||s&&"function"!=typeof s?e:l(b,k,e));m||(a.$plugins=null,c.$beforeInit?(a.$beforeInit=c.$beforeInit.slice(),a.$afterInit=c.$afterInit.slice(),a.$beforeDestroy=c.$beforeDestroy.slice(),a.$afterDestroy=c.$afterDestroy.slice()):(a.$beforeInit=[],a.$afterInit=[],a.$beforeDestroy=[],a.$afterDestroy=[]))},q=function(a,d){for(var b in d)d.hasOwnProperty(b)&&
("$beforeInit"==b?a.$beforeInit.push(d[b]):"$afterInit"==b?a.$afterInit.push(d[b]):"$beforeDestroy"==b?a.$beforeDestroy.push(d[b]):"$afterDestroy"==b?a.$afterDestroy.push(d[b]):a[b]||(a[b]=d[b]))},h=function(a){a||(a=new y);var d=function(){return function(){var e=[],b=[],c,r,g,f,d;if(!this)throw"Must instantiate via new";this.$plugins=[];this.$constructor.apply(this,arguments);g=this.$plugins;c=-1;for(r=this.$beforeInit.length;++c<r;e.push([this.$beforeInit[c],this]));c=-1;for(r=this.$afterInit.length;++c<
r;b.push([this.$afterInit[c],this]));if(g.length)for(c=0,r=g.length;c<r;c++){f=g[c];if(t(f)&&(d=f,f=a.get("plugin."+f,!0),!f))throw d+" not found";f=new f(this,arguments);f.$beforeHostInit&&e.push([f.$beforeHostInit,f]);f.$afterHostInit&&b.push([f.$afterHostInit,f]);g[c]=f}c=-1;for(r=e.length;++c<r;e[c][0].apply(e[c][1],arguments));this.$init&&this.$init.apply(this,arguments);c=-1;for(r=b.length;++c<r;b[c][0].apply(b[c][1],arguments));}},b=function(){};B(b.prototype,{$class:null,$extends:null,$plugins:null,
$mixins:null,$destroyed:!1,$constructor:u,$init:u,$beforeInit:[],$afterInit:[],$beforeDestroy:[],$afterDestroy:[],$getClass:function(){return this.$class},$getParentClass:function(){return this.$extends},$intercept:function(e,b,c,a,g){this[e]=C(this[e],b,c||this,this,a,g)},$implement:function(e){var b=this.constructor;b&&b.$parent&&m(this,e,b.$parent)},$destroy:function(){var e=this.$beforeDestroy,b=this.$afterDestroy,c=this.$plugins,a,g,f;if(!this.$destroyed){this.$destroyed=!0;a=-1;for(g=e.length;++a<
g;e[a].apply(this,arguments));a=0;for(g=c.length;a<g;a++)c[a].$beforeHostDestroy&&c[a].$beforeHostDestroy();f=this.destroy();a=-1;for(g=e.length;++a<g;b[a].apply(this,arguments));a=0;for(g=c.length;a<g;a++)c[a].$destroy();if(!1!==f)for(a in this)this.hasOwnProperty(a)&&(this[a]=null);this.$destroyed=!0}},destroy:function(){}});b.$self=b;b.$instantiate=function(){var a=arguments;switch(a.length){case 0:return new this;case 1:return new this(a[0]);case 2:return new this(a[0],a[1]);case 3:return new this(a[0],
a[1],a[2]);case 4:return new this(a[0],a[1],a[2],a[3]);default:return l(this,a)}};b.$override=function(a){var b=this.$self,c=this.$parent;b&&c&&m(b.prototype,a,c)};b.$extend=function(a,b){return h(a,b,this)};var h=function(e,s,c){e=e||{};var h=e.$class,g=c||e.$extends,f=e.$mixins,l,n,p;g?t(g)?c=a.get(g):(c=g,g=c.$class||""):(c=b,g="");if(g&&!c)throw g+" not found";h&&(h=a.normalize(h));e.$class=h;e.$extends=g;e.$mixins=null;l=function(){};l.prototype=c.prototype;g=new l;l=null;e.$constructor=e.$constructor||
k;m(g,e,c);if(f)for(e=0,l=f.length;e<l;e++)p=f[e],t(p)&&(p=a.get("mixin."+p,!0)),q(g,p);f=d();g.constructor=f;f.prototype=g;for(n in b)"prototype"!=n&&b.hasOwnProperty(n)&&(f[n]=b[n]);for(n in c)"prototype"!=n&&c.hasOwnProperty(n)&&(f[n]=c[n]);if(s)for(n in s)"prototype"!=n&&s.hasOwnProperty(n)&&(f[n]=s[n]);f.$parent=c;f.$self=f;h&&a.register(h,f);return f},l=function(b){var d=a.get(b),c=x.call(arguments,1);if(!d)throw b+" not found";return d.$instantiate.apply(d,c)};this.factory=l;this.isSubclassOf=
function(b,d){var c=b,h=a.get;d=t(d)?a.normalize(d):d.prototype.$class;for(t(b)&&(c=h(a.normalize(b)));c&&c.prototype;){if(c.prototype.$class==d)return!0;c=c.$parent}return!1};this.isInstanceOf=function(b,d){var c=t(d)?a.get(d):d;return c?b instanceof c:!1};this.define=h;this.BaseClass=b};h.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null};return h}()});
