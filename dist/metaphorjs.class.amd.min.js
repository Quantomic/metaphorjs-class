define("metaphorjs-class",["metaphorjs-namespace"],function(s){var h=function(f){return"function"==typeof f},n=Object.prototype.toString,k=function(){var f={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(g){if(!g){if(null===g)return 6;if(void 0===g)return 7}var h=f[n.call(g)];return void 0===h?-1:1==h&&isNaN(g)?8:h}}(),g=function(f){return"string"==typeof f||f===""+f},
t=function(f){if(null===f||"object"!=typeof f)return!1;f=k(f);return 2<f||-1==f},u=Array.prototype.slice,p=function(){},m=function(f){f||(f=new s);var m=function(){this.supr&&this.supr!==p&&this.supr.apply(this,arguments)},n=function(d,a){return r(function(){},d,a)},k=function(d,a,c){return function(){var b,e=this.supr;this.supr=d.prototype[a]||("__construct"==a?d:p)||p;b=c.apply(this,arguments);this.supr=e;return b}},v=function(d,a,c){for(var b in a)a.hasOwnProperty(b)&&(d[b]=!h(a[b])||!h(c.prototype[b])&&
c.prototype[b]?a[b]:k(c,b,a[b]))},r=function(d,a,c){var b=function(){};b.prototype=d.prototype;b=new b;a.__construct=c||m;var e=function(){this.__construct.apply(this,arguments);this.initialize&&this.initialize.apply(this,arguments)};v(b,a,d);b.constructor=e;e.prototype=b;e.prototype.getClass=function(){return e.__class};e.prototype.getParentClass=function(){return e.__parentClass};e.__instantiate=function(a){return function(){var b=function(){},c;b.prototype=a.prototype;b=new b;c=a.prototype.constructor.apply(b,
arguments);return t(c)?c:b}}(e);return e},q=function(d,a,c,b,e,m){null===d&&(d="");h(d)?(e=c,g(a)?(e=b,b=c):(b=a,c=d,a=null),d=null):g(d)||(e=a,b=d,d=c=a=null);g(a)||h(a)||(e=b,b=c,c=a,a=null);h(c)||(e=b,b=c,c=null);b=b||{};var l=a&&g(a)?f.get(a):a;if(a&&!l)throw Error(a+" not found");a=l?r(l,b,c):n(b,c);a.__isMetaphorClass=!0;a.__parent=l;a.__parentClass=l?l.__class:null;a.__class=d;if(e)for(var k in e)e.hasOwnProperty(k)&&(a[k]=e[k]);d&&(m?f.add(d,a):f.register(d,a));e&&e.alias&&f.add(e.alias,a);
return a};this.factory=function(d){var a=f.get(d),c=u.call(arguments,1);if(!a)throw Error(d+" not found");return a.__instantiate.apply(this,c)};this.isSubclassOf=function(d,a){var c=d,b=f.get;g(a)||(a=a.getClass?a.getClass():a.prototype.constructor.__class);for(g(d)&&(c=b(d));c;){if(c.prototype.constructor.__class==a)return!0;c&&(c=c.getParentClass?b(c.getParentClass()):c.__parent)}return!1};this.isInstanceOf=function(d,a){var c=g(a)?f.get(a):a;return c?d instanceof c:!1};this.define=q;this.defineCache=
function(d,a,c,b,e){return q(d,a,c,b,e,!0)};this.extend=function(d,a,c,b){return q(null,d,a,c,b)}};m.prototype={factory:null,isSubclassOf:null,isInstanceOf:null,define:null,defineCache:null,extend:null};return m});
